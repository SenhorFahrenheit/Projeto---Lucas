<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Configura o layout responsivo -->
  <title>Jogo Canvas</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <!-- Fonte personalizada -->
  <link rel="stylesheet" href="style/style.css">
</head>

<body>
  <div id="menu" class="styleBox"> <!-- Div principal que contÃ©m o menu inicial -->
    <div id="mainBox">
      <header>
        <h1>LogicJourney</h1>
      </header>
      <main>
        <section class="menu-square"> <!-- SeÃ§Ã£o com os botÃµes do menu -->
          <button type="button" id="jogarBtn">JOGAR</button>
          <button type="button">SAIR</button>
        </section>
        <section class="menu-buttons">
          <div id="configBtn">âš™</div>
          <div>ðŸ”Š</div>
        </section>
      </main>
    </div>
  </div>
  <div id="usuario" class="styleBox">
    <main>
      <!-- Campo de entrada para o nome do usuÃ¡rio -->
      <section class="user-box">
        <h1>Antes de comeÃ§ar, insira seu nome</h1>
        <div>
          <input type="text" id="userName" placeholder="Digite seu nome" maxlength="15">
          <button type="button" id="userBtn">OK</button>
        </div>
      </section>
    </main>
  </div>
  <div id="config" class="styleBox"> <!-- SeÃ§Ã£o com os botÃµes de configuraÃ§Ã£o -->
    <main>
      <section class="config-box">
        <button type="button">Cache</button>
        <button type="button" id="menuBtn">Menu</button>
      </section>
    </main>
  </div>

  <div id="divCanvas" style="display: none;"> <!-- Div que contÃ©m os elementos canvas, inicialmente oculta -->
    <canvas id="cenario"></canvas> <!-- Canvas para o cenÃ¡rio -->
    <canvas id="pergunta"></canvas> <!-- Canvas para perguntas -->
    <canvas id="sprites"></canvas> <!-- Canvas para sprites -->
    <canvas id="interface"></canvas> <!-- Canvas para interface -->
    <noscript>Seu navegador nÃ£o suporta o canvas. Por favor ative o JavaScript.</noscript>
    <!-- Mensagem para navegadores sem suporte a JavaScript -->
  </div>
</body>
<script src="js/iniciar.js"></script> <!-- Script para inicializaÃ§Ã£o do jogo -->
<script src="js/pergunta.js"></script> <!-- Script relacionado Ã s perguntas -->
<script src="js/interface.js"></script> <!-- Script para a interface -->
<script src="js/cenario.js"></script> <!-- Script para o cenÃ¡rio -->
<script src="js/animacao.js"></script> <!-- Script para animaÃ§Ãµes -->
<script src="js/carregamento.js"></script> <!-- Script para carregamento de conteÃºdo -->
<script src="js/eventos.js"></script> <!-- Script para eventos -->
<script src="js/heroi.js"></script> <!-- Script para o herÃ³i -->
<script src="js/vilao.js"></script> <!-- Script para o vilÃ£o -->
<script>
  document.getElementById("configBtn").addEventListener("click", function () {
    document.getElementById("menu").style.display = "none"; // Oculta o menu inicial
    document.getElementById("config").style.display = "flex"; // Exibe o menu de configuraÃ§Ãµes

    document.getElementById("menuBtn").addEventListener("click", function () {
      document.getElementById("config").style.display = "none"; // Oculta o menu de configuraÃ§Ãµes
      document.getElementById("menu").style.display = "flex"; // Exibe novamente o menu inicial
    }, { once: true });
  });

  // Adiciona um evento de clique ao botÃ£o "OK" para iniciar o jogo
  document.getElementById("jogarBtn").addEventListener("click", function () {
    document.getElementById("menu").style.display = "none"; // Oculta o menu inicial
    document.getElementById("usuario").style.display = "flex"; // Exibe a seÃ§Ã£o de usuÃ¡rio
  });

  // Adiciona um evento de clique ao botÃ£o "JOGAR"
  document.getElementById("userBtn").addEventListener("click", function () {
    const nome = document.getElementById("userName").value; // ObtÃ©m o valor do campo de entrada
    if (nome === "") return;

    localStorage.setItem('nome', nome); // Armazena o nome do usuÃ¡rio no localStorage
    // Oculta o menu inicial
    document.getElementById("usuario").style.display = "none";

    // Exibe a div que contÃ©m os canvas
    const contPai = document.getElementById("divCanvas");
    const canvasCenario = document.getElementById("cenario");
    const canvasSprites = document.getElementById("sprites");
    const canvasInterface = document.getElementById("interface");
    const canvasPergunta = document.getElementById("pergunta");

    contPai.style.display = "block";

    // Define as dimensÃµes dos canvas com base no tamanho da div pai
    const largura = contPai.clientWidth;
    const altura = contPai.clientHeight;

    [canvasCenario, canvasSprites, canvasInterface, canvasPergunta].forEach(c => c.width = largura);

    canvasCenario.height = altura / 1.5; // Altura do canvas do cenÃ¡rio
    canvasSprites.height = altura / 1.5; // Altura do canvas de sprites
    canvasInterface.height = altura / 3; // Altura do canvas da interface
    canvasPergunta.height = canvasCenario.height / 4; // Altura do canvas de perguntas

    // Objeto que agrupa os canvas
    const conjuntoCanvas = {
      cenario: canvasCenario,
      sprites: canvasSprites,
      interface: canvasInterface,
      pergunta: canvasPergunta
    };

    // Adiciona um evento de redimensionamento para recarregar a pÃ¡gina
    let esperarResize;
    window.addEventListener("resize", () => {
      clearTimeout(esperarResize);
      esperarResize = setTimeout(() => location.reload(), 200);
    });

    // Chama a funÃ§Ã£o para iniciar o jogo, passando os canvas como parÃ¢metro
    iniciarJogo(conjuntoCanvas);
  });
</script>

</html>